@layer reset {
  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }

  /* https://kilianvalkhof.com/2022/css-html/your-css-reset-needs-text-size-adjust-probably/ */
  html {
    -moz-text-size-adjust: none;
    -webkit-text-size-adjust: none;
    text-size-adjust: none;
  }

  body,
  h1,
  h2,
  h3,
  h4,
  p,
  figure,
  blockquote,
  dl,
  dd {
    margin: 0;
  }

  /* https://www.scottohara.me/blog/2019/01/12/lists-and-safari.html */
  [role="list"] {
    list-style: none;
    margin: 0;
    padding: 0;
  }

  body {
    min-block-size: 100vh;
    line-height: 1.6;
  }

  h1,
  h2,
  h3,
  button,
  input,
  label {
    line-height: 1.1;
  }

  h1,
  h2,
  h3,
  h4 {
    text-wrap: balance;
  }

  p,
  li {
    text-wrap: pretty;
  }

  img,
  picture {
    max-inline-size: 100%;
    display: block;
  }

  input,
  button,
  textarea,
  select {
    font: inherit;
  }
}

@layer base {
  :root {
    --clr-white: hsl(0, 0%, 100%);
    --clr-bg-1: hsl(212, 14%, 19%);
    --clr-bg-2: hsl(213, 15%, 12%);
    --clr-brand-1: hsl(171, 93%, 52%);
    --clr-brand-2: hsl(171, 91%, 79%);
    --clr-grey: hsl(228, 7%, 28%);
    --clr-html: hsl(13, 79%, 52%);
    --clr-css: hsl(204, 88%, 38%);
    --clr-js: hsl(39, 81%, 52%);
    --clr-react: hsl(198, 75%, 52%);

    /* ACCESSIBILITY: Font scale multiplier */
    --font-scale: 1;

    /* ACCESSIBILITY: Animation duration (can be reduced for motion sensitivity) */
    --animation-duration: 0.3s;
    --transition-duration: 0.2s;

    --ff-heading: "Ubuntu", sans-serif;
    /* --ff-body: "IBM Plex Mono", monospace; */
    --ff-body: "Ubuntu", sans-serif;

    --fs-300: calc(0.875rem * var(--font-scale)); /* 14px */
    --fs-400: calc(1rem * var(--font-scale)); /* 16px */
    --fs-500: calc(1.125rem * var(--font-scale)); /* 20px */
    --fs-600: calc(1.5rem * var(--font-scale)); /* 24px */
    --fs-700: calc(2rem * var(--font-scale)); /* 32px */
    --fs-800: calc(3rem * var(--font-scale)); /* 48px */
    --fs-850: calc(4rem * var(--font-scale)); /* 64px */
    --fs-900: calc(7.3125rem * var(--font-scale)); /* 117px */

    --fw-light: 300;
    --fw-regular: 400;
    --fw-medium: 500;

    --lh-tight: 1.125rem; /* 18px on 16px base */
    --lh-normal: 1.5rem; /* 24px on 16px base */
    --lh-relaxed: 1.75rem; /* 28px on 16px base */
    --lh-loose: 2rem; /* 32px on 16px base */

    --lh-134: 1.145rem; /* 134px on 117px */
    --lh-72: 1.125rem; /* 72px on 64px */
    --lh-36: 1.125rem; /* 36px on 32px */
    --lh-62: 1.292rem; /* 62px on 48px */
    --lh-42: 1.3125rem; /* 42px on 32px */

    @media (width > 760px) {
      --fs-500: calc(1.25rem * var(--font-scale));
      --fs-600: calc(1.5rem * var(--font-scale));
      --fs-700: calc(2rem * var(--font-scale));
      --fs-800: calc(3rem * var(--font-scale));
      --fs-900: calc(5rem * var(--font-scale));
      --fs-1000: calc(7.5rem * var(--font-scale));
    }
  }

  :root {
    --text-main: var(--clr-brand-1);
    --text-high-contrast: var(--clr-white);
    --text-brand: var(--clr-brand-1);
    --text-brand-light: var(--clr-brand-2);

    --background-dark: var(--clr-bg-1);
    --background-extra-dark: var(--clr-bg-2);

    --font-size-bG-text-U: var(--fs-900);
    --font-size-H1-U: var(--fs-850);
    --font-size-H2-U: var(--fs-700);
    --font-size-Button-U: var(--fs-500);
    --font-size-Para-U: var(--fs-400);
    --font-size-Label-U-M: var(--fs-300);

    --font-size-Number-M: var(--fs-800);
    --font-size-H2-M: var(--fs-700);
    --font-size-Logo-M: var(--fs-700);
    --font-size-Menu-M: var(--fs-600);
    --font-size-Media-M: var(--fs-400);
    --font-size-Para-M: var(--fs-400);
    --font-size-Code-M: var(--fs-300);

    --font-size-sm: var(--fs-300);
    --font-size-regular: var(--fs-400);
    --font-size-md: var(--fs-500);
    --font-size-lg: var(--fs-600);

    --border-radius-1: 0.25rem;
    --border-radius-2: 0.5rem;
    --border-radius-3: 0.75rem;

    /* ==============================================
     ACCESSIBILITY THEME OVERRIDES
     ============================================== */

    /* Font Size Controls */
    [data-font-size="small"] {
      --font-scale: 0.875;
    }

    [data-font-size="large"] {
      --font-scale: 1.25;
    }

    [data-font-size="extra-large"] {
      --font-scale: 1.5;
    }

    /* Light Theme */
    [data-theme="light"] {
      --text-main: var(--clr-bg-1);
      --text-high-contrast: var(--clr-bg-2);
      --background-dark: var(--clr-white);
      --background-extra-dark: hsl(0, 0%, 96%);
      --text-brand: var(--clr-brand-1);
      --text-brand-light: hsl(171, 93%, 45%); /* Slightly darker for contrast */
    }

    /* High Contrast Mode */
    [data-theme="high-contrast"] {
      --text-main: hsl(0, 0%, 100%);
      --text-high-contrast: hsl(0, 0%, 100%);
      --text-brand: hsl(60, 100%, 70%); /* Yellow for high contrast */
      --text-brand-light: hsl(60, 100%, 80%);
      --background-dark: hsl(0, 0%, 0%);
      --background-extra-dark: hsl(0, 0%, 8%);
      --clr-html: hsl(0, 100%, 70%);
      --clr-css: hsl(200, 100%, 70%);
      --clr-js: hsl(50, 100%, 70%);
      --clr-react: hsl(200, 100%, 80%);
    }

    /* Reduced Motion */
    [data-reduced-motion="true"] {
      --animation-duration: 0.01ms;
      --transition-duration: 0.01ms;
    }

    [data-reduced-motion="true"] *,
    [data-reduced-motion="true"] *::before,
    [data-reduced-motion="true"] *::after {
      animation-duration: var(--animation-duration) !important;
      animation-iteration-count: 1 !important;
      transition-duration: var(--transition-duration) !important;
    }

    /* Dyslexia-Friendly Font Option */
    [data-dyslexia-font="true"] {
      --ff-heading: "OpenDyslexic", "Comic Sans MS", cursive;
      --ff-body: "OpenDyslexic", "Comic Sans MS", monospace;
    }

    /* Enhanced Focus Indicators */
    [data-enhanced-focus="true"] *:focus-visible {
      outline: 3px solid var(--text-brand) !important;
      outline-offset: 2px !important;
      border-radius: var(--border-radius-1) !important;
    }
  }

  /* Base HTML styles */
  html {
    font-family: var(--ff-body);
    line-height: var(--lh-normal);
  }

  body {
    font-size: var(--font-size-regular);
    color: var(--text-main);
    background-color: var(--background-dark);
    font-weight: var(--fw-regular);
    transition: background-color var(--transition-duration) ease,
      color var(--transition-duration) ease;
  }

  .font-ubuntu {
    font-family: var(--ff-heading);
    color: var(--text-high-contrast);
  }

  /* IBM Plex Mono font family (Body) */
  .font-ibm {
    font-family: var(--ff-body);
  }

  .bg-text-u {
    font-size: var(--font-size-bG-text-U);
    line-height: var(--lh-134);
    font-weight: var(--fw-regular);
    font-family: "Ubuntu", sans-serif;
  }

  .h1-u {
    font-size: var(--font-size-H1-U);
    line-height: var(--lh-72);
    font-weight: var(--fw-regular);
    font-family: "Ubuntu", sans-serif;
  }

  .h2-u {
    font-size: var(--font-size-H2-U);
    line-height: var(--lh-36);
    font-weight: var(--fw-regular);
    font-family: "Ubuntu", sans-serif;
  }

  .button-u {
    font-size: var(--font-size-Button-U);
    line-height: var(--lh-normal);
    font-weight: var(--fw-regular);
    font-family: "Ubuntu", sans-serif;
  }

  .article-u {
    font-size: var(--font-size-Para-U);
    line-height: var(--lh-loose);
    font-weight: var(--fw-light);
    font-family: "Ubuntu", sans-serif;
  }

  .para-u {
    font-size: var(--font-size-Para-U);
    line-height: var(--lh-tight);
    font-weight: var(--fw-light);
    font-family: "Ubuntu", sans-serif;
  }

  .label-u-m {
    font-size: var(--font-size-Label-U-M);
    line-height: var(--lh-tight);
    font-weight: var(--fw-medium);
    font-family: "Ubuntu", sans-serif;
  }

  .label-u-l {
    font-size: var(--font-size-Label-U-M);
    line-height: var(--lh-tight);
    font-weight: var(--fw-light);
    font-family: "Ubuntu", sans-serif;
  }

  .number-m {
    font-size: var(--font-size-Number-M);
    line-height: var(--lh-62);
    font-weight: var(--fw-medium);
    font-family: "IBM Plex Mono", monospace;
  }

  .h2-m {
    font-size: var(--font-size-H2-M);
    line-height: var(--lh-42);
    font-weight: var(--fw-medium);
    font-family: "IBM Plex Mono", monospace;
  }

  .logo-m {
    font-size: var(--font-size-Logo-M);
    line-height: var(--lh-42);
    font-weight: var(--fw-medium);
    font-family: "IBM Plex Mono", monospace;
  }

  .menu-m {
    font-size: var(--font-size-Menu-M);
    line-height: var(--lh-normal);
    font-weight: var(--fw-regular);
    font-family: "IBM Plex Mono", monospace;
  }

  .media-m {
    font-size: var(--font-size-Media-M);
    line-height: var(--lh-normal);
    font-weight: var(--fw-regular);
    font-family: "IBM Plex Mono", monospace;
  }

  .para-m {
    font-size: var(--font-size-Para-M);
    line-height: var(--lh-normal);
    font-weight: var(--fw-regular);
    font-family: "IBM Plex Mono", monospace;
  }

  .code-m {
    font-size: var(--font-size-Code-M);
    line-height: var(--lh-relaxed);
    font-weight: var(--fw-regular);
    font-family: "IBM Plex Mono", monospace;
  }

  /* Accessibility font-weight controls */
  .font-weight-light {
    font-weight: var(--fw-light) !important;
  }
  .font-weight-regular {
    font-weight: var(--fw-regular) !important;
  }
  .font-weight-medium {
    font-weight: var(--fw-medium) !important;
  }

  /* Font weight increase for accessibility */
  .font-weight-accessibility {
    font-weight: calc(var(--fw-regular) + 100);
  }

  /* Headings with proper font family */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: var(--ff-heading);
    color: var(--text-high-contrast);
    font-weight: var(--fw-regular);
  }

  h1 {
    font-size: var(--font-size-H1-U);
    line-height: var(--lh-72);
  }

  h2 {
    font-size: var(--font-size-H2-U);
    line-height: var(--lh-36);
  }

  /* Links */
  a {
    color: var(--text-high-contrast);
    transition: color var(--transition-duration) ease;
    text-decoration: none;
  }

  a:hover,
  a:focus-visible {
    color: var(--text-brand-light);
    text-decoration: underline;
  }

  /* Improved focus styles */
  *:focus-visible {
    outline: 2px solid var(--text-brand);
    outline-offset: 2px;
    border-radius: var(--border-radius-1);
  }

  /* Button focus improvements */
  button:focus-visible {
    outline: 2px solid var(--text-brand);
    outline-offset: 2px;
  }

  /* Paragraph spacing */
  .paragraph-spacing-16 {
    margin-bottom: 1rem;
  }

  .paragraph-spacing-32 {
    margin-bottom: 2rem;
  }

  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  /* Skip link for keyboard navigation */
  .skip-link {
    position: absolute;
    top: -40px;
    left: 6px;
    background: var(--background-extra-dark);
    color: var(--text-high-contrast);
    padding: 8px;
    text-decoration: none;
    border-radius: var(--border-radius-1);
    z-index: 1000;
  }

  .skip-link:focus {
    top: 6px;
  }

  /* High contrast button styles */
  [data-theme="high-contrast"] button {
    border: 2px solid var(--text-main);
    background: var(--background-dark);
    color: var(--text-main);
  }

  [data-theme="high-contrast"] button:hover,
  [data-theme="high-contrast"] button:focus {
    background: var(--text-main);
    color: var(--background-dark);
  }
}

@layer layout {
  .wrapper {
    --wrapper-max-width: 1130px;

    max-width: var(--wrapper-max-width);
    /* Use this below instead on margin: 0 auto */
    margin-inline: auto;
    padding-inline: 1rem;
    box-sizing: content-box;
  }

  &[data-width="narrow"] {
    --wrapper-max-width: 720px;
  }

  &[data-width="wide"] {
    --wrapper-max-width: 1330px;
  }
}

@layer utilities {
  .visually-hidden {
    clip: rect(0 0 0 0);
    clip-path: inset(50%);
    height: 1px;
    overflow: hidden;
    position: absolute;
    white-space: nowrap;
    width: 1px;
  }
}
